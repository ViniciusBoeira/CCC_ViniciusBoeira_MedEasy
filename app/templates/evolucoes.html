{% extends "base.html" %}

{% block app_content %}
    <h2>Prontuário da Consulta</h2>
    <hr>
    <h4><strong>Paciente:</strong> {{ consulta.paciente.name }}</h4>
    <p><strong>Data da Consulta:</strong> {{ consulta.data_hora.strftime('%d/%m/%Y às %H:%M') }}</p>
    <hr>

    <h4>Histórico de Evoluções</h4>
    {% if evolucoes %}
        {% for evolucao in evolucoes %}
        <div class="panel panel-default">
            <div class="panel-heading">
                Evolução registrada em {{ evolucao.data_criacao.strftime('%d/%m/%Y %H:%M') }} por <strong>Dr(a). {{ evolucao.medico.name }}</strong>
            </div>
            <div class="panel-body">
                {{ evolucao.conteudo | nl2br }} {# nl2br preserva as quebras de linha #}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>Nenhuma evolução registrada para esta consulta ainda.</p>
    {% endif %}

    <hr>
    <h4>Adicionar Nova Evolução</h4>
    <div class="row">
        <div class="col-md-8">
            {{ wtf.quick_form(form) }}
        </div>
    </div>

{% endblock %}